<section class="max-w-2xl mx-auto my-8 p-8 border border-gray-300 rounded-lg">
  <h2 class="text-2xl font-bold mb-6">Complex Form (Signals)</h2>

  <form (submit)="onSubmit()" novalidate>
    <app-form-field [field]="form.firstName" [label]="'First name'" />
    <app-form-field [field]="form.lastName" [label]="'Last name'" />

    <div class="mb-4 flex flex-col">
      <label for="age" class="mb-2 font-bold"
        >Age
        @if (form.age().required()) {
          <span class="text-red-600">*</span>
        }
      </label>
      <input
        id="age"
        type="number"
        [field]="form.age"
        class="p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
      @if (hasErrors(form.age())) {
        @for (error of form.age().errors(); track error.message) {
          <span class="text-red-600 text-sm mt-1">{{ error.message }}</span>
        }
      }
    </div>

    <div class="mb-4 flex flex-col">
      <label for="email" class="mb-2 font-bold"
        >Email
        @if (form.email().required()) {
          <span class="text-red-600">*</span>
        }
      </label>
      <input
        id="email"
        type="email"
        [field]="form.email"
        class="p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
      @if (hasErrors(form.email())) {
        @for (error of form.email().errors(); track error.message) {
          <span class="text-red-600 text-sm mt-1">{{ error.message }}</span>
        }
      }
    </div>

    <div class="mb-4 flex items-center">
      <input id="hasAddress" type="checkbox" [field]="form.hasAddress" class="mr-2 w-4 h-4" />
      <label for="hasAddress" class="font-bold">Include Address</label>
    </div>

    <app-user-address [address]="form.address" />

    <div class="flex gap-1.5">
      <button
        type="submit"
        [disabled]="!form().valid()"
        class="px-6 py-3 bg-blue-600 text-white rounded cursor-pointer disabled:bg-gray-300 disabled:cursor-not-allowed hover:bg-blue-700 transition-colors"
      >
        Submit
      </button>
      <button
        type="button"
        (click)="reset()"
        class="px-6 py-3 bg-blue-600 text-white rounded cursor-pointer disabled:bg-gray-300 disabled:cursor-not-allowed hover:bg-blue-700 transition-colors"
      >
        Reset form
      </button>
    </div>
  </form>

  @if (form().errors()) {
    <div class="mt-4">
      <h3 class="text-lg font-bold mb-2 text-red-600">Form Errors:</h3>
      <ul class="list-disc list-inside text-red-600">
        @for (error of form().errors(); track error.message) {
          <li>{{ error.message }}</li>
        }
      </ul>
    </div>
  }

  @if (form().value()) {
    <div class="mt-8 bg-gray-100 p-4 rounded">
      <h3 class="text-lg font-bold mb-2">Form Data:</h3>
      <pre class="text-sm">{{ form().value() | json }}</pre>
    </div>
  }
</section>
